import {Canvas, Meta, Story} from '@storybook/addon-docs/blocks';
import {InputDatepickerComponent} from "./input-datepicker.component";
import {MatDatepickerModule} from "@angular/material/datepicker";
import {DatepickerHeaderComponent} from "../components/datepicker-header/datepicker-header.component";
import {DateAdapter, MAT_DATE_FORMATS, MAT_DATE_LOCALE} from '@angular/material/core';
import {CustomDateAdapter, MY_DATE_FORMATS} from "../helpers/custom-date-adapter.helper";
import {IconsModule} from "../../icons/icons.module";
import {BrowserAnimationsModule} from "@angular/platform-browser/animations";
import {IconsRegistryModule} from "../../icons/icons-registry.module";
import {DatesHelper} from "../../../../shared/helpers/dates.helper"; import {Platform, PlatformModule} from "@angular/cdk/platform";

<Meta
    title="Atoms/Input Datepicker"
    component={InputDatepickerComponent}
    parameters={{layout: 'padded'}}/>

# Input Datepicker
<br/>
<br/>

### Props
| Property | Type  | Values | Default  |
| ------ | --------- |------ | --------- |
| name    | string   |  | 'input-datepicker' |
| disabled      | boolean  | true/false       | false     |
| placeholder    | string   |  | 'dd/mm/aaaa' |
| minDate   | number |  (Milliseconds)  |  null |
| maxDate    | number   |   (Milliseconds)   |  null  |
| value    | number   |  (Milliseconds) |  null  |

### Events
| Event | Arguments  | Description |
| ------ | --------- |------ |
| change    |     | Emitted when datepicker's value changes |

------

export const Template = (args) => ({
    component: InputDatepickerComponent,
    props: {...args},
    moduleMetadata: {
        imports: [MatDatepickerModule, IconsModule, IconsRegistryModule, BrowserAnimationsModule, PlatformModule],
        declarations: [InputDatepickerComponent, DatepickerHeaderComponent],
        entryComponents: [DatepickerHeaderComponent],
        providers: [
            {provide: DateAdapter, useClass: CustomDateAdapter, deps: [MAT_DATE_LOCALE, Platform]},
            {provide: MAT_DATE_FORMATS, useValue: MY_DATE_FORMATS}
        ]
    },
    template: '<app-input-datepicker ' +
        '[name]="name" ' +
        '[disabled]="disabled" ' +
        '[placeholder]="placeholder" ' +
        '[minDate]="minDate" ' +
        '[maxDate]="maxDate" ' +
        '[value]="value" ' +
        '></app-input-datepicker>',
})

<br/>
<br/>

### Appearance

<Canvas>
    <Story name='Default' height={350}
           args={{
               placeholder: 'dd/mm/aaaa',
               minDate: DatesHelper.Date()
           }} parameters={{
        docs: {
            source: {
                code: '<app-input-datepicker></app-input-datepicker>',
            }
        }
    }}>{Template.bind({})}
    </Story>
    <Story name='Min Date' height={350}
           args={{
               placeholder: 'dd/mm/aaaa',
               minDate: DatesHelper.Date().add(3, 'd')
           }} parameters={{
        docs: {
            source: {
                code: '<app-input-datepicker></app-input-datepicker>',
            }
        }
    }}>{Template.bind({})}
    </Story>
</Canvas>

<br/>
<br/>

# Usages

Import InputDatepickerModule into your custom module

```typescript
import { InputDatepickerModule } from '@atoms/input-datepicker/input-datepicker.module';

@NgModule({
    imports: [InputDatepickerModule]
})

export class YourModule {}
```

## Examples

  ```html
<app-input-datepicker></app-input-datepicker>
```
 ```html
<app-input-datepicker></app-input-datepicker>
  ```
