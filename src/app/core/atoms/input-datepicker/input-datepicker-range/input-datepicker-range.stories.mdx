import {Canvas, Meta, Story} from '@storybook/addon-docs/blocks';
import {InputDatepickerRangeComponent} from "./input-datepicker-range.component";
import {MatDatepickerModule} from "@angular/material/datepicker";
import {DatepickerHeaderComponent} from "../components/datepicker-header/datepicker-header.component";
import {DateAdapter, MAT_DATE_FORMATS, MAT_DATE_LOCALE} from '@angular/material/core';
import {IconsModule} from "../../icons/icons.module";
import {BrowserAnimationsModule} from "@angular/platform-browser/animations";
import {IconsRegistryModule} from "../../icons/icons-registry.module";
import {ReactiveFormsModule} from "@angular/forms";
import {CustomDateAdapter, MY_DATE_FORMATS} from "../helpers/custom-date-adapter.helper";
import {Platform, PlatformModule} from "@angular/cdk/platform";
import {DatesHelper} from "../../../../shared/helpers/dates.helper";

<Meta
    title="Atoms/Input Datepicker Range"
    component={InputDatepickerRangeComponent}
    parameters={{layout: 'padded'}}/>

# Input Datepicker Range
<br/>
<br/>

### Props
| Property | Type  | Values | Default  |
| ------ | --------- |------ | --------- |
| name    | string   |  | 'input-datepicker' |
| placeholder    | string   |  | 'dd/mm/aaaa' |
| minDate   | number |  (Milliseconds)  |  (Actual day) |
| maxDate    | number   |   (Milliseconds)   |  null  |
| disabled    | boolean   |  true/false   |  false  |
| startValue    | number   |  (Milliseconds)  |  null  |
| endValue    | number   | (Milliseconds) |  null  |

### Events
| Event | Arguments  | Description |
| ------ | --------- |------ |
| change    |     | Emitted when datepicker's value changes |

------

export const Template = (args) => ({
    component: InputDatepickerRangeComponent,
    props: {
        placeholder: 'dd/mm/aaaa',
        name: 'input-datepicker-range',
        disabled: false,
        ...args
    },
    moduleMetadata: {
        imports: [ReactiveFormsModule, MatDatepickerModule, IconsModule, IconsRegistryModule, BrowserAnimationsModule, PlatformModule],
        declarations: [InputDatepickerRangeComponent, DatepickerHeaderComponent],
        entryComponents: [DatepickerHeaderComponent],
        providers: [
            {provide: DateAdapter, useClass: CustomDateAdapter, deps: [MAT_DATE_LOCALE, Platform]},
            {provide: MAT_DATE_FORMATS, useValue: MY_DATE_FORMATS},
        ]
    },
    template: '<app-input-datepicker-range ' +
        '[name]="name" ' +
        '[disabled]="disabled" ' +
        '[placeholder]="placeholder" ' +
        '[minDate]="minDate" ' +
        '[maxDate]="maxDate" ' +
        '[startValue]="startValue" ' +
        '[endValue]="endValue" ' +
        '></app-input-datepicker-range>',
})

<br/>
<br/>

### Appearance

<Canvas>
    <Story name='Default'
           height={350}
           parameters={{
               docs: {
                   source: {
                       code: '<app-input-datepicker-range></app-input-datepicker-range>',
                   }
               }
           }}>{Template.bind({})}
    </Story>
    <Story name='Min Date'
           height={350}
           args={{
               minDate: DatesHelper.Date().add(1, 'M').valueOf(),
           }}
           parameters={{
               docs: {
                   source: {
                       code: '<app-input-datepicker-range minDate="DatesHelper.Date().add(2, `M`)"></app-input-datepicker-range>',
                   }
               }
           }}>{Template.bind({})}
    </Story>
    <Story name='Max Date'
           height={350}
           args={{
               maxDate: DatesHelper.Date().add(2, 'M').valueOf(),
               placeholder: 'dd-mm-aaaa'
           }}
           parameters={{
               docs: {
                   source: {
                       code: '<app-input-datepicker-range maxDate="DatesHelper.Date().add(1, `M`)"></app-input-datepicker-range>',
                   }
               }
           }}>{Template.bind({})}
    </Story>
    <Story name='Disabled'
           height={350}
           args={{
               disabled: true
           }} parameters={{
        docs: {
            source: {
                code: '<app-input-datepicker-range disabled="true"></app-input-datepicker-range>',
            }
        }
    }}>{Template.bind({})}
    </Story>
</Canvas>

<br/>
<br/>

# Usages

Import InputDatepickerModule into your custom module

```typescript
import { InputDatepickerModule } from '@atoms/input-datepicker/input-datepicker.module';

@NgModule({
    imports: [InputDatepickerModule]
})

export class YourModule {}
```

## Examples

<br/>

> - ### Min and Max dates
>```typescript
>import { DatesHelper } from '@helpers/dates.helper';
>
>@Component({
>  selector: 'input-datepicker-range-example',
>  templateUrl: 'input-datepicker-range-example.html',
>})
>export class InputDatepickerRangeExample {
>    public minDate: number = DatesHelper.Date().add(1, `M`).valueOf();
>    public maxDate: number = DatesHelper.Date().add(2, 'M').valueOf();
>}
>```
>
>  ```html
><!--input-datepicker-range-example.html-->
><app-input-datepicker-range [minDate]="minDate"
>                            [maxDate]="maxDate">
></app-input-datepicker-range>
>```

 ```html
<!--input-datepicker-range-example.html-->
<app-input-datepicker-range></app-input-datepicker-range>
  ```
