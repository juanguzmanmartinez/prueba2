import {Canvas, Meta, Story} from '@storybook/addon-docs/blocks';
import {CustomDateAdapter, MY_FORMATS} from "../input-datepicker/input-datepicker.component";
import {InputDatepickerRangeComponent} from "./input-datepicker-range.component";
import {MatDatepickerModule} from "@angular/material/datepicker";
import {DatepickerHeaderComponent} from "../components/datepicker-header/datepicker-header.component";
import {DateAdapter, MAT_DATE_FORMATS, MAT_DATE_LOCALE} from '@angular/material/core';
import {IconsModule} from "../../icons/icons.module";
import {BrowserAnimationsModule} from "@angular/platform-browser/animations";
import {IconsRegistryModule} from "../../icons/icons-registry.module";
import * as  moment from 'moment';
import {ReactiveFormsModule} from "@angular/forms";

<Meta
    title="Atoms/Inputs/Input Datepicker Range"
    component={InputDatepickerRangeComponent}
    parameters={{layout: 'padded'}}/>

# Input Datepicker Range
<br/>
<br/>

### Props
| Property | Type  | Values | Default  |
| ------ | --------- |------ | --------- |
| placeholder    | string   |  | 'dd/mm/aaaa' |
| inputFormat      | string   |  | 'DD/MM/YYYY' |
| outputFormat      | string  |      | 'DD/MM/YYYY'     |
| minDate   | moment.Moment |        |  moment() |
| maxDate    | moment.Moment   |         |  null  |
| disabled    | boolean   |  true/false   |  false  |
| iconDisabled    | boolean   |  true/false   |  false  |
| startValue    | string   |         |  null  |
| endValue    | string   |         |  null  |

### Events
| Event | Arguments  | Description |
| ------ | --------- |------ |
| change    |     | Emitted when datepicker's value changes |

------

export const Template = (args) => ({
    component: InputDatepickerRangeComponent,
    props: {...args},
    moduleMetadata: {
        imports: [ReactiveFormsModule, MatDatepickerModule, IconsModule, IconsRegistryModule, BrowserAnimationsModule],
        declarations: [InputDatepickerRangeComponent, DatepickerHeaderComponent],
        entryComponents: [DatepickerHeaderComponent],
        providers: [
            {provide: DateAdapter, useClass: CustomDateAdapter, deps: [MAT_DATE_LOCALE]},
            {provide: MAT_DATE_FORMATS, useValue: MY_FORMATS},
        ]
    },
    template: '<app-input-datepicker-range ' +
        '[placeholder]="placeholder" ' +
        '[inputFormat]="inputFormat" ' +
        '[outputFormat]="outputFormat" ' +
        '[minDate]="minDate" ' +
        '[maxDate]="maxDate" ' +
        '[startValue]="startValue" ' +
        '[endValue]="endValue" ' +
        '></app-input-datepicker-range>',
})

<br/>
<br/>

### Appearance

<Canvas>
    <Story name='Default' height={350}
           args={{
               placeholder: 'dd/mm/aaaa',
               inputFormat: 'DD/MM/YYYY',
               outputFormat: 'DD/MM/YYYY',
               minDate: moment()
           }} parameters={{
        docs: {
            source: {
                code: '<app-input-datepicker-range></app-input-datepicker-range>',
            }
        }
    }}>{Template.bind({})}
    </Story>
    <Story name='Min Date' height={350}
           args={{
               placeholder: 'dd/mm/aaaa',
               inputFormat: 'DD/MM/YYYY',
               outputFormat: 'DD/MM/YYYY',
               minDate: moment().add(3, 'd')
           }} parameters={{
        docs: {
            source: {
                code: '<app-input-datepicker-range></app-input-datepicker-range>',
            }
        }
    }}>{Template.bind({})}
    </Story>
</Canvas>

<br/>
<br/>

# Usages

Import InputDatepickerModule into your custom module

```typescript
import { InputDatepickerModule } from '@atoms/input-datepicker/input-datepicker.module';

@NgModule({
    imports: [InputDatepickerModule]
})

export class YourModule {}
```

## Examples

  ```html
<app-input-datepicker-range outputFormat="YYYY/MM/DD"></app-input-datepicker-range>
```
 ```html
<app-input-datepicker-range></app-input-datepicker-range>
  ```
